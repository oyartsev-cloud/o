{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/main.js"],"sourcesContent":["const BASE_URL = 'https://your-energy.b.goit.study/api';\n\nasync function fetchApi(endpoint, options = {}) {\n  const url = `${BASE_URL}${endpoint}`;\n  const response = await fetch(url, {\n    ...options,\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    },\n  });\n  if (!response.ok) {\n    const error = new Error(`API error: ${response.status}`);\n    error.status = response.status;\n    throw error;\n  }\n  return response.json();\n}\n\nexport async function getQuote() {\n  return fetchApi('/quote');\n}\n\nexport async function getFilters(filter) {\n  const params = new URLSearchParams({ filter });\n  return fetchApi(`/filters?${params}`);\n}\n\nexport async function getExercises(params = {}) {\n  const searchParams = new URLSearchParams();\n  if (params.bodypart) searchParams.set('bodypart', params.bodypart);\n  if (params.muscles) searchParams.set('muscles', params.muscles);\n  if (params.equipment) searchParams.set('equipment', params.equipment);\n  if (params.keyword) searchParams.set('keyword', params.keyword);\n  if (params.page) searchParams.set('page', String(params.page));\n  if (params.limit != null) searchParams.set('limit', String(params.limit));\n  const query = searchParams.toString();\n  return fetchApi(`/exercises${query ? `?${query}` : ''}`);\n}\n\nexport async function getExerciseById(id) {\n  return fetchApi(`/exercises/${id}`);\n}\n\nexport async function patchExerciseRating(id, rating) {\n  return fetchApi(`/exercises/${id}/rating`, {\n    method: 'PATCH',\n    body: JSON.stringify({ rating }),\n  });\n}\n\nexport async function postSubscription(email) {\n  return fetchApi('/subscription', {\n    method: 'POST',\n    body: JSON.stringify({ email }),\n  });\n}\n","import * as api from './js/api.js';\n\nconst EXERCISES_PER_PAGE = 10;\nconst FILTER_PARAM_MAP = {\n  Muscles: 'muscles',\n  'Body parts': 'bodypart',\n  Equipment: 'equipment',\n};\n\nconst elements = {\n  quoteText: document.querySelector('[data-quote-text]'),\n  quoteAuthor: document.querySelector('[data-quote-author]'),\n  filterTabs: document.querySelectorAll('[data-filter-tab]'),\n  filterCategories: document.querySelector('[data-filter-categories]'),\n  searchForm: document.querySelector('[data-search-form]'),\n  searchInput: document.querySelector('[data-search-input]'),\n  exercisesList: document.querySelector('[data-exercises-list]'),\n  pagination: document.querySelector('[data-pagination]'),\n  modalBackdrop: document.querySelector('[data-modal-backdrop]'),\n  modalContent: document.querySelector('[data-modal-content]'),\n  modalClose: document.querySelector('[data-modal-close]'),\n  subscriptionForm: document.querySelector('[data-subscription-form]'),\n  subscriptionSuccess: document.querySelector('[data-subscription-success]'),\n  subscriptionError: document.querySelector('[data-subscription-error]'),\n};\n\nlet state = {\n  activeFilterType: 'Muscles',\n  activeCategory: null,\n  keyword: '',\n  currentPage: 1,\n  totalPages: 1,\n  filtersData: [],\n  exercisesData: { results: [], page: 1, totalPages: 1 },\n  modalExerciseId: null,\n};\n\nfunction renderQuote(quote) {\n  if (!elements.quoteText || !elements.quoteAuthor) return;\n  elements.quoteText.textContent = quote.quote;\n  elements.quoteAuthor.textContent = quote.author;\n}\n\nfunction getExercisesParams() {\n  const params = { page: state.currentPage, limit: EXERCISES_PER_PAGE };\n  if (state.keyword) params.keyword = state.keyword;\n  const paramKey = FILTER_PARAM_MAP[state.activeFilterType];\n  if (paramKey && state.activeCategory) params[paramKey] = state.activeCategory;\n  return params;\n}\n\nfunction renderFilterCategories() {\n  if (!elements.filterCategories) return;\n  elements.filterCategories.innerHTML = state.filtersData\n    .map(\n      item => `\n    <li class=\"filter-category-item ${state.activeCategory === item.name ? 'active' : ''}\">\n      <button type=\"button\" class=\"filter-category-btn\" data-category-name=\"${escapeAttr(item.name)}\">\n        <img src=\"${escapeAttr(item.imgURL)}\" alt=\"${escapeAttr(item.name)}\" loading=\"lazy\" />\n        <span class=\"filter-category-name\">${escapeHtml(item.name)}</span>\n      </button>\n    </li>\n  `\n    )\n    .join('');\n\n  elements.filterCategories.querySelectorAll('.filter-category-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      const name = btn.getAttribute('data-category-name');\n      state.activeCategory = state.activeCategory === name ? null : name;\n      state.currentPage = 1;\n      loadFilters(state.activeFilterType);\n      loadExercises();\n    });\n  });\n}\n\nfunction escapeAttr(str) {\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML.replace(/\"/g, '&quot;');\n}\n\nfunction escapeHtml(str) {\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML;\n}\n\nfunction renderStars(rating, interactive = false, exerciseId = null) {\n  const value = Math.round(Number(rating)) || 0;\n  let html = '';\n  for (let i = 1; i <= 5; i++) {\n    const filled = i <= value;\n    if (interactive && exerciseId) {\n      html += `<button type=\"button\" class=\"modal-exercise-star-btn ${filled ? 'filled' : ''}\" data-rating=\"${i}\" data-exercise-id=\"${escapeAttr(exerciseId)}\">★</button>`;\n    } else {\n      html += `<span class=\"exercise-card-rating-star ${filled ? 'filled' : ''}\">★</span>`;\n    }\n  }\n  return html;\n}\n\nfunction renderExerciseCard(exercise) {\n  const ratingHtml = renderStars(exercise.rating, false);\n  return `\n    <li class=\"exercise-card\">\n      <img class=\"exercise-card-image\" src=\"${escapeAttr(exercise.gifUrl)}\" alt=\"${escapeAttr(exercise.name)}\" loading=\"lazy\" />\n      <div class=\"exercise-card-body\">\n        <h3 class=\"exercise-card-name\">${escapeHtml(exercise.name)}</h3>\n        <div class=\"exercise-card-rating\">${ratingHtml}</div>\n        <p class=\"exercise-card-meta\">\n          <span>${escapeHtml(exercise.bodyPart)}</span>\n          <span>${escapeHtml(exercise.target)}</span>\n        </p>\n        <div class=\"exercise-card-footer\">\n          <span class=\"exercise-card-calories\">${exercise.burnedCalories} cal</span>\n          <span class=\"exercise-card-time\">${exercise.time} min</span>\n          <button type=\"button\" class=\"exercise-card-start\" data-exercise-id=\"${escapeAttr(exercise._id)}\">Start</button>\n        </div>\n      </div>\n    </li>\n  `;\n}\n\nfunction renderExercisesList() {\n  if (!elements.exercisesList) return;\n  const { results } = state.exercisesData;\n  if (!results.length) {\n    elements.exercisesList.innerHTML = '<li class=\"exercises-empty\">No exercises found. Try another filter or search.</li>';\n    return;\n  }\n  elements.exercisesList.innerHTML = results.map(renderExerciseCard).join('');\n  elements.exercisesList.querySelectorAll('.exercise-card-start').forEach(btn => {\n    btn.addEventListener('click', () => openModal(btn.getAttribute('data-exercise-id')));\n  });\n}\n\nfunction renderPagination() {\n  if (!elements.pagination) return;\n  const { page, totalPages } = state.exercisesData;\n  if (totalPages <= 1) {\n    elements.pagination.innerHTML = '';\n    return;\n  }\n  const parts = [];\n  const addPage = (p) => {\n    parts.push(\n      `<button type=\"button\" class=\"pagination-btn ${p === page ? 'active' : ''}\" data-page=\"${p}\">${p}</button>`\n    );\n  };\n  if (totalPages <= 7) {\n    for (let i = 1; i <= totalPages; i++) addPage(i);\n  } else {\n    addPage(1);\n    if (page > 3) parts.push('<span class=\"pagination-ellipsis\">...</span>');\n    const start = Math.max(2, page - 1);\n    const end = Math.min(totalPages - 1, page + 1);\n    for (let i = start; i <= end; i++) addPage(i);\n    if (page < totalPages - 2) parts.push('<span class=\"pagination-ellipsis\">...</span>');\n    if (totalPages > 1) addPage(totalPages);\n  }\n  elements.pagination.innerHTML = parts.join('');\n  elements.pagination.querySelectorAll('.pagination-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      state.currentPage = Number(btn.getAttribute('data-page'));\n      loadExercises();\n    });\n  });\n}\n\nasync function loadQuote() {\n  try {\n    const quote = await api.getQuote();\n    renderQuote(quote);\n  } catch {\n    if (elements.quoteText) elements.quoteText.textContent = 'Failed to load quote.';\n    if (elements.quoteAuthor) elements.quoteAuthor.textContent = '';\n  }\n}\n\nasync function loadFilters(filterType) {\n  state.activeFilterType = filterType;\n  try {\n    const data = await api.getFilters(filterType);\n    state.filtersData = data.results || [];\n    renderFilterCategories();\n  } catch {\n    state.filtersData = [];\n    renderFilterCategories();\n  }\n}\n\nasync function loadExercises() {\n  const params = getExercisesParams();\n  try {\n    const data = await api.getExercises(params);\n    state.exercisesData = { results: data.results || [], page: data.page || 1, totalPages: data.totalPages || 1 };\n  } catch {\n    state.exercisesData = { results: [], page: 1, totalPages: 1 };\n  }\n  renderExercisesList();\n  renderPagination();\n}\n\nfunction openModal(exerciseId) {\n  state.modalExerciseId = exerciseId;\n  if (!elements.modalBackdrop || !elements.modalContent) return;\n  elements.modalContent.innerHTML = '<div class=\"modal-loading\">Loading...</div>';\n  elements.modalBackdrop.hidden = false;\n  document.body.style.overflow = 'hidden';\n\n  api.getExerciseById(exerciseId).then(\n    (exercise) => {\n      const starsHtml = renderStars(exercise.rating, true, exercise._id);\n      elements.modalContent.innerHTML = `\n        <img class=\"modal-exercise-image\" src=\"${escapeAttr(exercise.gifUrl)}\" alt=\"${escapeAttr(exercise.name)}\" />\n        <h2 class=\"modal-exercise-name\" id=\"modal-title\">${escapeHtml(exercise.name)}</h2>\n        <div class=\"modal-exercise-rating-wrap\">\n          <span class=\"modal-exercise-rating-label\">Rating</span>\n          <div class=\"modal-exercise-stars\" data-modal-stars>${starsHtml}</div>\n        </div>\n        <p class=\"modal-exercise-meta\">\n          <span>${escapeHtml(exercise.bodyPart)}</span> • <span>${escapeHtml(exercise.target)}</span> • <span>${escapeHtml(exercise.equipment)}</span><br />\n          ${exercise.burnedCalories} cal • ${exercise.time} min\n        </p>\n        <p class=\"modal-exercise-description\">${escapeHtml(exercise.description || '')}</p>\n      `;\n      elements.modalContent.querySelectorAll('.modal-exercise-star-btn').forEach((btn) => {\n        btn.addEventListener('click', () => {\n          const rating = Number(btn.getAttribute('data-rating'));\n          api.patchExerciseRating(exercise._id, rating).then(\n            () => {\n              const starBtns = elements.modalContent.querySelectorAll('.modal-exercise-star-btn');\n              starBtns.forEach((b, i) => b.classList.toggle('filled', i < rating));\n            },\n            () => {}\n          );\n        });\n      });\n    },\n    () => {\n      elements.modalContent.innerHTML = '<div class=\"modal-loading\">Failed to load exercise.</div>';\n    }\n  );\n}\n\nfunction closeModal() {\n  if (!elements.modalBackdrop) return;\n  elements.modalBackdrop.hidden = true;\n  document.body.style.overflow = '';\n  state.modalExerciseId = null;\n}\n\nfunction initFilters() {\n  elements.filterTabs.forEach((tab) => {\n    tab.addEventListener('click', () => {\n      const filterType = tab.getAttribute('data-filter-tab');\n      elements.filterTabs.forEach((t) => {\n        t.classList.remove('active');\n        t.setAttribute('aria-selected', 'false');\n      });\n      tab.classList.add('active');\n      tab.setAttribute('aria-selected', 'true');\n      state.activeCategory = null;\n      state.currentPage = 1;\n      loadFilters(filterType);\n      loadExercises();\n    });\n  });\n}\n\nfunction initSearch() {\n  if (!elements.searchForm) return;\n  elements.searchForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    state.keyword = (elements.searchInput?.value || '').trim();\n    state.currentPage = 1;\n    loadExercises();\n  });\n}\n\nfunction initModal() {\n  elements.modalClose?.addEventListener('click', closeModal);\n  elements.modalBackdrop?.addEventListener('click', (e) => {\n    if (e.target === elements.modalBackdrop) closeModal();\n  });\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && elements.modalBackdrop && !elements.modalBackdrop.hidden) closeModal();\n  });\n}\n\nfunction initSubscription() {\n  if (!elements.subscriptionForm) return;\n  elements.subscriptionForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const form = e.target;\n    const emailInput = form.querySelector('input[name=\"email\"]');\n    const email = (emailInput?.value || '').trim();\n    if (!email) return;\n    if (elements.subscriptionSuccess) elements.subscriptionSuccess.hidden = true;\n    if (elements.subscriptionError) {\n      elements.subscriptionError.hidden = true;\n      elements.subscriptionError.textContent = '';\n    }\n    try {\n      await api.postSubscription(email);\n      if (elements.subscriptionSuccess) elements.subscriptionSuccess.hidden = false;\n      form.reset();\n    } catch (err) {\n      if (elements.subscriptionError) {\n        elements.subscriptionError.textContent = err.message || 'Subscription failed. Try again.';\n        elements.subscriptionError.hidden = false;\n      }\n    }\n  });\n}\n\nfunction init() {\n  loadQuote();\n  loadFilters('Muscles');\n  loadExercises();\n  initFilters();\n  initSearch();\n  initModal();\n  initSubscription();\n}\n\ninit();\n"],"names":["BASE_URL","fetchApi","endpoint","options","url","response","error","getQuote","getFilters","filter","params","getExercises","searchParams","query","getExerciseById","id","patchExerciseRating","rating","postSubscription","email","EXERCISES_PER_PAGE","FILTER_PARAM_MAP","elements","state","renderQuote","quote","getExercisesParams","paramKey","renderFilterCategories","item","escapeAttr","escapeHtml","btn","name","loadFilters","loadExercises","str","div","renderStars","interactive","exerciseId","value","html","i","filled","renderExerciseCard","exercise","ratingHtml","renderExercisesList","results","openModal","renderPagination","page","totalPages","parts","addPage","p","start","end","loadQuote","api.getQuote","filterType","data","api.getFilters","api.getExercises","api.getExerciseById","starsHtml","api.patchExerciseRating","b","closeModal","initFilters","tab","t","initSearch","_a","initModal","_b","e","initSubscription","form","emailInput","api.postSubscription","err","init"],"mappings":"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"}