/* empty css                      */(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const h="https://your-energy.b.goit.study/api";async function u(e,t={}){const n=`${h}${e}`,i=await fetch(n,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!i.ok){const a=new Error(`API error: ${i.status}`);throw a.status=i.status,a}return i.json()}async function v(){return u("/quote")}async function E(e){const t=new URLSearchParams({filter:e});return u(`/filters?${t}`)}async function x(e={}){const t=new URLSearchParams;e.bodypart&&t.set("bodypart",e.bodypart),e.muscles&&t.set("muscles",e.muscles),e.equipment&&t.set("equipment",e.equipment),e.keyword&&t.set("keyword",e.keyword),e.page&&t.set("page",String(e.page)),e.limit!=null&&t.set("limit",String(e.limit));const n=t.toString();return u(`/exercises${n?`?${n}`:""}`)}async function q(e){return u(`/exercises/${e}`)}async function S(e,t){return u(`/exercises/${e}/rating`,{method:"PATCH",body:JSON.stringify({rating:t})})}async function L(e){return u("/subscription",{method:"POST",body:JSON.stringify({email:e})})}const $=10,C={Muscles:"muscles","Body parts":"bodypart",Equipment:"equipment"},r={quoteText:document.querySelector("[data-quote-text]"),quoteAuthor:document.querySelector("[data-quote-author]"),filterTabs:document.querySelectorAll("[data-filter-tab]"),filterCategories:document.querySelector("[data-filter-categories]"),searchForm:document.querySelector("[data-search-form]"),searchInput:document.querySelector("[data-search-input]"),exercisesList:document.querySelector("[data-exercises-list]"),pagination:document.querySelector("[data-pagination]"),modalBackdrop:document.querySelector("[data-modal-backdrop]"),modalContent:document.querySelector("[data-modal-content]"),modalClose:document.querySelector("[data-modal-close]"),subscriptionForm:document.querySelector("[data-subscription-form]"),subscriptionSuccess:document.querySelector("[data-subscription-success]"),subscriptionError:document.querySelector("[data-subscription-error]")};let s={activeFilterType:"Muscles",activeCategory:null,keyword:"",currentPage:1,totalPages:1,filtersData:[],exercisesData:{results:[],page:1,totalPages:1},modalExerciseId:null};function P(e){!r.quoteText||!r.quoteAuthor||(r.quoteText.textContent=e.quote,r.quoteAuthor.textContent=e.author)}function A(){const e={page:s.currentPage,limit:$};s.keyword&&(e.keyword=s.keyword);const t=C[s.activeFilterType];return t&&s.activeCategory&&(e[t]=s.activeCategory),e}function g(){r.filterCategories&&(r.filterCategories.innerHTML=s.filtersData.map(e=>`
    <li class="filter-category-item ${s.activeCategory===e.name?"active":""}">
      <button type="button" class="filter-category-btn" data-category-name="${d(e.name)}">
        <img src="${d(e.imgURL)}" alt="${d(e.name)}" loading="lazy" />
        <span class="filter-category-name">${l(e.name)}</span>
      </button>
    </li>
  `).join(""),r.filterCategories.querySelectorAll(".filter-category-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-category-name");s.activeCategory=s.activeCategory===t?null:t,s.currentPage=1,p(s.activeFilterType),f()})}))}function d(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML.replace(/"/g,"&quot;")}function l(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function y(e,t=!1,n=null){const i=Math.round(Number(e))||0;let a="";for(let o=1;o<=5;o++){const c=o<=i;t&&n?a+=`<button type="button" class="modal-exercise-star-btn ${c?"filled":""}" data-rating="${o}" data-exercise-id="${d(n)}">★</button>`:a+=`<span class="exercise-card-rating-star ${c?"filled":""}">★</span>`}return a}function T(e){const t=y(e.rating,!1);return`
    <li class="exercise-card">
      <img class="exercise-card-image" src="${d(e.gifUrl)}" alt="${d(e.name)}" loading="lazy" />
      <div class="exercise-card-body">
        <h3 class="exercise-card-name">${l(e.name)}</h3>
        <div class="exercise-card-rating">${t}</div>
        <p class="exercise-card-meta">
          <span>${l(e.bodyPart)}</span>
          <span>${l(e.target)}</span>
        </p>
        <div class="exercise-card-footer">
          <span class="exercise-card-calories">${e.burnedCalories} cal</span>
          <span class="exercise-card-time">${e.time} min</span>
          <button type="button" class="exercise-card-start" data-exercise-id="${d(e._id)}">Start</button>
        </div>
      </div>
    </li>
  `}function k(){if(!r.exercisesList)return;const{results:e}=s.exercisesData;if(!e.length){r.exercisesList.innerHTML='<li class="exercises-empty">No exercises found. Try another filter or search.</li>';return}r.exercisesList.innerHTML=e.map(T).join(""),r.exercisesList.querySelectorAll(".exercise-card-start").forEach(t=>{t.addEventListener("click",()=>F(t.getAttribute("data-exercise-id")))})}function w(){if(!r.pagination)return;const{page:e,totalPages:t}=s.exercisesData;if(t<=1){r.pagination.innerHTML="";return}const n=[],i=a=>{n.push(`<button type="button" class="pagination-btn ${a===e?"active":""}" data-page="${a}">${a}</button>`)};if(t<=7)for(let a=1;a<=t;a++)i(a);else{i(1),e>3&&n.push('<span class="pagination-ellipsis">...</span>');const a=Math.max(2,e-1),o=Math.min(t-1,e+1);for(let c=a;c<=o;c++)i(c);e<t-2&&n.push('<span class="pagination-ellipsis">...</span>'),t>1&&i(t)}r.pagination.innerHTML=n.join(""),r.pagination.querySelectorAll(".pagination-btn").forEach(a=>{a.addEventListener("click",()=>{s.currentPage=Number(a.getAttribute("data-page")),f()})})}async function M(){try{const e=await v();P(e)}catch{r.quoteText&&(r.quoteText.textContent="Failed to load quote."),r.quoteAuthor&&(r.quoteAuthor.textContent="")}}async function p(e){s.activeFilterType=e;try{const t=await E(e);s.filtersData=t.results||[],g()}catch{s.filtersData=[],g()}}async function f(){const e=A();try{const t=await x(e);s.exercisesData={results:t.results||[],page:t.page||1,totalPages:t.totalPages||1}}catch{s.exercisesData={results:[],page:1,totalPages:1}}k(),w()}function F(e){s.modalExerciseId=e,!(!r.modalBackdrop||!r.modalContent)&&(r.modalContent.innerHTML='<div class="modal-loading">Loading...</div>',r.modalBackdrop.hidden=!1,document.body.style.overflow="hidden",q(e).then(t=>{const n=y(t.rating,!0,t._id);r.modalContent.innerHTML=`
        <img class="modal-exercise-image" src="${d(t.gifUrl)}" alt="${d(t.name)}" />
        <h2 class="modal-exercise-name" id="modal-title">${l(t.name)}</h2>
        <div class="modal-exercise-rating-wrap">
          <span class="modal-exercise-rating-label">Rating</span>
          <div class="modal-exercise-stars" data-modal-stars>${n}</div>
        </div>
        <p class="modal-exercise-meta">
          <span>${l(t.bodyPart)}</span> • <span>${l(t.target)}</span> • <span>${l(t.equipment)}</span><br />
          ${t.burnedCalories} cal • ${t.time} min
        </p>
        <p class="modal-exercise-description">${l(t.description||"")}</p>
      `,r.modalContent.querySelectorAll(".modal-exercise-star-btn").forEach(i=>{i.addEventListener("click",()=>{const a=Number(i.getAttribute("data-rating"));S(t._id,a).then(()=>{r.modalContent.querySelectorAll(".modal-exercise-star-btn").forEach((c,b)=>c.classList.toggle("filled",b<a))},()=>{})})})},()=>{r.modalContent.innerHTML='<div class="modal-loading">Failed to load exercise.</div>'}))}function m(){r.modalBackdrop&&(r.modalBackdrop.hidden=!0,document.body.style.overflow="",s.modalExerciseId=null)}function B(){r.filterTabs.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-filter-tab");r.filterTabs.forEach(n=>{n.classList.remove("active"),n.setAttribute("aria-selected","false")}),e.classList.add("active"),e.setAttribute("aria-selected","true"),s.activeCategory=null,s.currentPage=1,p(t),f()})})}function H(){r.searchForm&&r.searchForm.addEventListener("submit",e=>{var t;e.preventDefault(),s.keyword=(((t=r.searchInput)==null?void 0:t.value)||"").trim(),s.currentPage=1,f()})}function D(){var e,t;(e=r.modalClose)==null||e.addEventListener("click",m),(t=r.modalBackdrop)==null||t.addEventListener("click",n=>{n.target===r.modalBackdrop&&m()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&r.modalBackdrop&&!r.modalBackdrop.hidden&&m()})}function R(){r.subscriptionForm&&r.subscriptionForm.addEventListener("submit",async e=>{e.preventDefault();const t=e.target,n=t.querySelector('input[name="email"]'),i=((n==null?void 0:n.value)||"").trim();if(i){r.subscriptionSuccess&&(r.subscriptionSuccess.hidden=!0),r.subscriptionError&&(r.subscriptionError.hidden=!0,r.subscriptionError.textContent="");try{await L(i),r.subscriptionSuccess&&(r.subscriptionSuccess.hidden=!1),t.reset()}catch(a){r.subscriptionError&&(r.subscriptionError.textContent=a.message||"Subscription failed. Try again.",r.subscriptionError.hidden=!1)}}})}function N(){M(),p("Muscles"),f(),B(),H(),D(),R()}N();
//# sourceMappingURL=index.js.map
